<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>TP3 Azure DevOps - Portal de Usuarios</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header><h1>Portal de Usuarios</h1></header>

    <main>
      <section id="registro">
        <h2>Registro</h2>
        <form id="form-registro">
          <input type="email" id="reg-email" placeholder="Email" required />
          <input type="password" id="reg-pass" placeholder="Contraseña" required />
          <button type="submit">Crear cuenta</button>
        </form>
        <p id="reg-msg"></p>
      </section>

      <section id="login">
        <h2>Login</h2>
        <form id="form-login">
          <input type="email" id="login-email" placeholder="Email" required />
          <input type="password" id="login-pass" placeholder="Contraseña" required />
          <button type="submit">Ingresar</button>
        </form>
        <p id="login-msg"></p>
      </section>

      <section id="perfil">
        <h2>Perfil</h2>
        <input type="text" id="perfil-nombre" placeholder="Nombre" />
        <textarea id="perfil-bio" placeholder="Bio"></textarea>
        <button id="guardar-perfil">Guardar</button>
        <p id="perfil-msg"></p>
      </section>
    </main>

    <script>
      // Validación registro
      document.getElementById('form-registro').addEventListener('submit', e => {
        e.preventDefault();
        const email = document.getElementById('reg-email').value.trim();
        const pass = document.getElementById('reg-pass').value;
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/; // simple
        const msg = document.getElementById('reg-msg');
        if (!emailRegex.test(email)) { msg.textContent = 'Email inválido'; return; }
        if (pass.length < 6) { msg.textContent = 'La contraseña debe tener al menos 6 caracteres'; return; }
        localStorage.setItem('user', JSON.stringify({ email, pass }));
        msg.textContent = 'Cuenta creada ✔';
      });

      // Login simulado
      document.getElementById('form-login').addEventListener('submit', e => {
        e.preventDefault();
        const email = document.getElementById('login-email').value.trim();
        const pass = document.getElementById('login-pass').value;
        const saved = JSON.parse(localStorage.getItem('user') || '{}');
        const msg = document.getElementById('login-msg');
        if (saved.email === email && saved.pass === pass) msg.textContent = 'Login OK ✔';
        else msg.textContent = 'Credenciales inválidas';
      });

      // Perfil
      document.getElementById('guardar-perfil').addEventListener('click', () => {
        const nombre = document.getElementById('perfil-nombre').value.trim();
        const bio = document.getElementById('perfil-bio').value.trim();
        localStorage.setItem('profile', JSON.stringify({ nombre, bio }));
        document.getElementById('perfil-msg').textContent = 'Perfil guardado ✔';
      });
    </script>
  </body>
</html>
